# {{ProjectName}}

CloudFormation infrastructure using `cloudformation_dataclasses`.

## Structure

```
{{project_name}}/
├── __init__.py        # Package exports
├── context.py         # Deployment context (naming, tags, environment)
├── main.py            # Template builder and entry point
├── pyproject.toml     # Package config with dependencies
├── py.typed           # PEP 561 typed package marker
├── mypy.ini           # mypy type checking config
├── CLAUDE.md          # Claude Code project guidance
├── .vscode/           # VSCode settings
│   └── settings.json
└── README.md          # This file
```

## Quick Start

### Generate CloudFormation

```bash
python -m {{project_name}}.main
```

### Use in Your Code

```python
from {{project_name}}.main import build_template

template = build_template()
print(template.to_json())
```

## Adding Resources

### 1. Create a Resource File

```python
# my_bucket.py
from . import *
from .context import ctx
from cloudformation_dataclasses.aws.s3 import Bucket

@cloudformation_dataclass
class MyBucket:
    resource: Bucket
    context = ctx
    bucket_name = "my-bucket"
```

### 2. Import in main.py

```python
from .my_bucket import MyBucket

def main():
    bucket = MyBucket()
    template = build_template()
    print(template.to_json())
```

## Key Concepts

### DeploymentContext

Provides automatic resource naming and shared tags:

```python
ctx = {{ProjectName}}Context()

# Resources using this context get automatic names:
# {{project_name}}-{{component}}-ResourceName-{{stage}}-{{region}}
```

### Wrapper Classes

Each configuration is a separate class for reusability:

```python
@cloudformation_dataclass
class MyResource:
    resource: SomeAWSResource
    context = ctx
    # ... configuration
```

### Auto-registration

Resources are automatically collected when you call `Template.from_registry()`:

```python
bucket = MyBucket()  # Registered

template = Template.from_registry()  # Collects all registered resources
```

## IDE Support

This project includes configuration for type checking and editor integration:

- **py.typed** - PEP 561 marker for typed packages
- **mypy.ini** - mypy type checking configuration
- **.vscode/settings.json** - VSCode settings with Pylance type checking

Run type checks:

```bash
mypy {{project_name}}/
```

## Deploy

```bash
# Generate template
python -m {{project_name}}.main > template.yaml

# Deploy with AWS CLI
aws cloudformation deploy \
    --template-file template.yaml \
    --stack-name {{project_name}}-{{stage}}
```
